var detailsPaneShowing=lessonJsArgs.detailsPaneShowing,lessonCompleted=!1;function hideDetailsPane(){$("#lesson-body").removeClass("details-pane-open"),$("#lesson-body").addClass("details-pane-closed"),detailsPaneShowing=!1}function showDetailsPane(){$("#lesson-body").removeClass("details-pane-closed"),$("#lesson-body").addClass("details-pane-open"),detailsPaneShowing=!0,lessonJsArgs.showDisqusPaneAndNotLessonSummary&&DISQUS.reset({reload:!0})}function lessonPlayerCompleteCallback(){lessonJsArgs.requireManualCompletion||(!lessonJsArgs.completeBeforeAdvance||lessonCompleted?unlockNextLesson:completeLesson)()}function completeLesson(){($(".next-lesson-button:visible").exists()||$(".complete-lesson-button:visible").exists())&&($(".next-lesson-button").css("display","none"),$(".complete-lesson-link").html('<span class="sj-text-completing"><span>Completing...</span></span><i class="fa fa-spinner fa-spin" aria-hidden="true"></i>'),$(".complete-lesson-link").addClass("disabled"),$(".complete-lesson-button").css("display","inline-block")),$.ajax({url:lessonJsArgs.markLessonCompleteUrl,type:"POST",dataType:"json"}).done(function(e){lessonCompleted=!0,$(".complete-lesson-button").css("display","none"),$(".next-lesson-button").css("display","inline-block"),$(".next-lesson-button .fa-lock").hide(),courseCompletionCallback(e),unlockNextLesson(e)}).fail(function(){flashMessage(lessonJsArgs.lessonCompletionErrorHtml),$(".next-lesson-button").css("display","none"),$(".complete-lesson-link").html('<span class="sj-text-complete"><span>Complete</span></span><i class="fa fa-refresh" aria-hidden="true"></i>'),$(".complete-lesson-link").removeClass("disabled"),$(".complete-lesson-button").css("display","inline-block")})}async function updateLessonProgress(e){try{var s=await(await window.__SJ_INTERNAL_UNSUPPORTED.apiService.updateLessonProgress(lessonJsArgs.publishedCourseSlug,lessonJsArgs.lessonObfuscatedId,{mark_finished:e.mark_finished,lesson_progress_score:e.lesson_progress_score,lesson_progress_max_score:e.lesson_progress_max_score,lesson_progress_success_status:e.lesson_progress_success_status})).data;s.lesson_completed&&(courseCompletionCallback(s),unlockNextLesson(s))}catch(e){}}function courseCompletionCallback(e){e&&(e.hasOwnProperty("include_course_completion_code_snippet")&&e.include_course_completion_code_snippet&&$("#course_completion_code").html(e.course_completion_code_snippet),"undefined"!=typeof aptrinsic)&&e.caused_course_completion&&aptrinsic("track","Course Completion",{"Course Title":lessonJsArgs.courseTitle})}function unlockNextLesson(e){var s=document.querySelector(".next-lesson-link.button span");s&&!s.closest("#return-to-learning-path-button")&&(s.innerHTML=skilljarTranslate("lesson_page_next")),$(".next-lesson-link.button .fa-lock").hide(),$(".next-lesson-link").removeClass("disabled"),$(".next-lesson-locked-icon").addClass("hide"),$(".next-lesson-unlocked-icon").removeClass("hide"),$(".current-lesson-icon").addClass("hide"),$(".current-lesson-completed-icon").removeClass("hide"),e&&e.bullet_icon_classes?$(".current-lesson-completed-icon i").addClass(e.bullet_icon_classes):$(".current-lesson-completed-icon i").addClass(lessonJsArgs.defaultLessonCompletionClasses)}function resizeScaledEmbeddedContent(){var e;$(".scaled-embedded-content").removeAttr("style"),$(window).width()<768?$("body").hasClass("lesson-fullscreen")?$(".scaled-embedded-content").css("height",$(window).height()-90):(lessonJsArgs.lessonHeightPx?$(".scaled-embedded-content").css("height",lessonJsArgs.lessonHeightPx):$(".scaled-embedded-content").css("height",$(window).height()-172),lessonJsArgs.lessonWidthPx&&$(".scaled-embedded-content").css("width",lessonJsArgs.lessonWidthPx)):$("body").hasClass("lesson-fullscreen")?(e=110,2===skilljarThemeVersionMajor&&(e+=16),$(".scaled-embedded-content").css("height",$(window).height()-e)):((lessonJsArgs.lessonHeightPx||lessonJsArgs.lessonWidthPx)&&$(".scaled-embedded-content").css("margin","0 auto"),lessonJsArgs.lessonHeightPx?$("#lesson-main-content").height()<=lessonJsArgs.lessonHeightPx?$(".scaled-embedded-content").height($("#lesson-main-content").height()-2):$(".scaled-embedded-content").css("height",lessonJsArgs.lessonHeightPx):($(".details-pane-left .scaled-embedded-content, .details-pane-right .scaled-embedded-content").css("height","100%"),e=196,2===skilljarThemeVersionMajor&&(e+=40),$(".details-pane-bottom .scaled-embedded-content").css("height",$(window).height()-e)),lessonJsArgs.lessonWidthPx&&$(".scaled-embedded-content").css("width",lessonJsArgs.lessonWidthPx))}$(document).ready(function(){function e(e){$("body").toggleClass("lesson-fullscreen");let s="true"===(e=e.target).getAttribute("aria-pressed");e.setAttribute("aria-pressed",!s),document.querySelectorAll("sjwc-video").forEach(e=>e.updateAttribute("fullscreen-lesson",!s)),$(window).resize(),(e=document.querySelector("body.cbp-spmenu-open.lesson-fullscreen #header #header-left #left-nav-button"))?e.ariaLabel=skilljarTranslate("general_close"):(e=document.querySelector("body:not(.cbp-spmenu-open).lesson-fullscreen #header #header-left #left-nav-button"))&&(e.ariaLabel=skilljarTranslate("lesson_page_burger_title"))}$(".toggle-fullscreen, .toggle-fullscreen-v3").click(e),$(".toggle-fullscreen, .toggle-fullscreen-v3").keypress(function(s){"Enter"===s.key&&e()}),$(".details-pane-button").on("keydown",function(e){"Enter"===e.key&&setTimeout(function(){(detailsPaneShowing?$("#close-details-pane-button a"):$("#open-details-pane-button a")).focus()},0)}),$(".details-pane-button").on("click",function(){(detailsPaneShowing?hideDetailsPane:showDetailsPane)()}),window.sjUpdateLessonContentTop=function(){$("#lesson-main-content").css("top",$(".lesson-top").outerHeight())},sjUpdateLessonContentTop(),$(window).resize(_.throttle(sjUpdateLessonContentTop,250));var s=document.querySelector(".lesson-active");s&&s.scrollIntoView({block:"center"}),lessonJsArgs.showDisqusPaneAndLessonNotHideDisqusPanel&&$("#details-pane-comments-tab").click(function(){$("#details-pane-summary-tab").removeClass("active"),$("#details-pane-comments-tab").addClass("active"),$("#details-pane-summary-content").addClass("show-for-small"),$("#details-pane-comments-content").removeClass("show-for-small"),DISQUS.reset({reload:!0})}),$("#details-pane-summary-tab").click(function(){$("#details-pane-comments-tab").removeClass("active"),$("#details-pane-summary-tab").addClass("active"),$("#details-pane-comments-content").addClass("show-for-small"),$("#details-pane-summary-content").removeClass("show-for-small")}),$(".disabled").click(function(e){$(this).hasClass("disabled")&&e.preventDefault()}),$(".complete-lesson-button").click(function(){completeLesson()})}),$(document).ready(function(){/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&$("iframe").parent().addClass("iOS-scroll"),$("body").hasClass("sj-page-lesson-headless")||(resizeScaledEmbeddedContent(),$(window).resize(_.throttle(resizeScaledEmbeddedContent,100)))});